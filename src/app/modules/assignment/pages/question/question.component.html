<ng-container *ngIf="{
    assignment: assignment$ | async,
    progression: progression$ | async
  } as data"
>
  <h4 class="current-question">
    Vraag {{ params.questionNumber }} / {{ data.assignment.payload.questions?.length }}
  </h4>
  <h2 class="question" >{{ currentQuestion?.question }}</h2>
  <div *ngIf="!turnedIn" class="anwser-options-container">
    <ng-container [ngSwitch]="currentQuestion?.questionType">
      <div class="radio-buttons-container" *ngSwitchCase="'multiple_choice'">
        <div class="clr-radio-wrapper" *ngFor="let option of currentQuestion.answers; let i = index">
          <input (change)="onChange(option.answer, false)" [(ngModel)]="currentQuestion.userAnswer" type="radio" id="vertical-radio{{i}}" name="radio-full" [value]="option.answer" class="clr-radio">
          <label for="vertical-radio{{i}}" class="clr-control-label">{{ option.answer }}</label>
        </div>
        <a class="btn" (click)="onChange(currentQuestion.userAnswer, true)" >
          Inleveren
        </a>
      </div>
      <div *ngSwitchCase="'open_question'">
        <textarea
          (input)="onChange($event.target.value, false)"
          [(ngModel)]="currentQuestion.userAnswer"
          placeholder="Vul hier je vraag in"
        >
        </textarea>
        <a class="btn" (click)="onChange(currentQuestion.userAnswer, true)">
          Inleveren
        </a>
      </div>
    </ng-container>

    <ng-container *ngIf="params.questionNumber < (data.assignment.payload.questions?.length)">
    </ng-container>

  </div>

  <div *ngIf="turnedIn">
    <ng-container [ngSwitch]="currentQuestion?.questionType">
      <div  *ngSwitchCase="'open_question'">
        <div>
          jouw antwoord:
          <div class="answer-container">
            {{currentQuestion.userAnswer}}
          </div>
        </div>
          <a
            class="btn"
            [routerLink]="['/', params.subject, params.assignmentType, params.assignmentId, 'vraag', params.questionNumber + 1]"
          >
            Volgende vraag
          </a>
      </div>
      <div class="" *ngSwitchCase="'multiple_choice'">
        <div class="radio-buttons-container" *ngSwitchCase="'multiple_choice'">
          jouw antwoord:
          <div
            [ngClass]="validateAnswer(currentQuestion.userAnswer) ? 'correct' : 'wrong'"
          >
            {{currentQuestion.userAnswer}}
          </div>
        </div>
        <a
          class="btn"
          [routerLink]="['/', params.subject, params.assignmentType, params.assignmentId, 'vraag', params.questionNumber + 1]"
        >
          Volgende vraag
        </a>
      </div>
    </ng-container>
  </div>
  <a
    *ngIf="params.questionNumber > 1"
    [routerLink]="['/', params.subject, params.assignmentType, params.assignmentId, 'vraag', params.questionNumber - 1]"
  >
    <div class="qst-btn previous">
      <clr-icon shape="angle left" size="70" class="is-inverse"></clr-icon>
    </div>
  </a>

  <a
    *ngIf="params.questionNumber <= data.progression && params.questionNumber < data.assignment.payload.questions.length"
    [routerLink]="['/', params.subject, params.assignmentType, params.assignmentId, 'vraag', params.questionNumber + 1]"
  >
    <div class="qst-btn next">
      <clr-icon shape="angle right" size="70" class="is-inverse"></clr-icon>
    </div>
  </a>

  <div class="progress-bar-container">
    <h3>Progressie</h3>
    <app-progress-bar
      [progression]="data.progression | totalPercentage: data.assignment.payload.questions?.length"
    >
    </app-progress-bar>
  </div>
</ng-container>
